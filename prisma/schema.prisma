generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["nativeTypes"]
}

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

model comment {
  id        Int       @id @default(autoincrement()) @db.Int
  postId    Int       @db.Int
  userId    Int       @db.Int
  content   String    @db.VarChar(1000)
  createdAt DateTime? @default(now()) @db.Datetime(3)
  updatedAt DateTime? @db.Datetime(3)
  post      post      @relation(fields: [postId], references: [id])
  user      user      @relation(fields: [userId], references: [id])

  @@index([postId], name: "postId")
  @@index([userId], name: "userId")
}

model post {
  id        Int       @id @default(autoincrement()) @db.Int
  userId    Int       @db.Int
  title     String    @db.VarChar(191)
  content   String    @db.VarChar(1000)
  imgUrl    String?   @db.VarChar(191)
  createdAt DateTime? @default(now()) @db.Datetime(3)
  updatedAt DateTime? @db.Datetime(3)
  user      user      @relation(fields: [userId], references: [id])
  comment   comment[]

  @@index([userId], name: "userId")
}

model user {
  id        Int       @id @default(autoincrement()) @db.Int
  firstname String    @db.VarChar(191)
  lastname  String    @db.VarChar(191)
  email     String    @unique @db.VarChar(191)
  gravatar  String    @db.VarChar(191)
  password  String    @db.VarChar(191)
  service   String    @db.VarChar(191)
  role      String    @db.VarChar(191)
  createdAt DateTime? @default(now()) @db.Datetime(3)
  updatedAt DateTime? @db.Datetime(3)
  comment   comment[]
  post      post[]
}
